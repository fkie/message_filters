<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FKIE Message Filters: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FKIE Message Filters
   </div>
   <div id="projectbrief">Improved filters for processing ROS messages</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">FKIE Message Filters Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The <a class="el" href="namespacefkie__message__filters.html" title="Primary namespace. ">fkie_message_filters</a> library is a replacement for the ROS message_filters package. It is written in modern C++ and more type-safe than the original version.</p>
<h1><a class="anchor" id="overview"></a>
Overview</h1>
<p>The data flow is modeled with a pipeline metaphor, where data always flows from a source to a sink. A filter is both source and sink for data, possibly with different data types. For integration with ROS, the library provides a number of subscribers and publishers which act as sources or sinks of the data flow.</p>
<h1><a class="anchor" id="getting-started"></a>
Getting Started</h1>
<p>Most of your own filter logic will probably be implemented with <a class="el" href="classfkie__message__filters_1_1UserFilter.html">UserFilter </a> or <a class="el" href="classfkie__message__filters_1_1SimpleUserFilter.html">SimpleUserFilter </a>. Most other filters in the library are intended to simplify common boilerplate tasks, such as setting up publishers and subscribers or synchronizing messages from multiple topics. As a simple "Hello World" example, consider:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;ros/ros.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;fkie_message_filters/fkie_message_filters.h&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">namespace </span>mf = <a class="code" href="namespacefkie__message__filters.html">fkie_message_filters</a>;</div><div class="line"></div><div class="line"><span class="keyword">using</span> StringSubscriber = mf::Subscriber&lt;std_msgs::String, mf::RosMessage&gt;;</div><div class="line"><span class="keyword">using</span> StringPublisher = mf::Publisher&lt;std_msgs::String, mf::RosMessage&gt;;</div><div class="line"><span class="keyword">using</span> GreetingFilter = mf::UserFilter&lt;StringSubscriber::Output, StringPublisher::Input&gt;;</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv)</div><div class="line">{</div><div class="line">    ros::init(argc, argv, <span class="stringliteral">&quot;hello&quot;</span>);</div><div class="line">    ros::NodeHandle nh;</div><div class="line">    StringSubscriber sub(nh, <span class="stringliteral">&quot;name&quot;</span>, 1);</div><div class="line">    StringPublisher pub(nh, <span class="stringliteral">&quot;greeting&quot;</span>, 1);</div><div class="line">    GreetingFilter flt;</div><div class="line"></div><div class="line">    flt.set_processing_function(</div><div class="line">        [](<span class="keyword">const</span> std_msgs::String&amp; input, <span class="keyword">const</span> GreetingFilter::CallbackFunction&amp; output)</div><div class="line">        {</div><div class="line">            std_msgs::String greeting;</div><div class="line">            greeting.data = <span class="stringliteral">&quot;Hello, &quot;</span> + input.data + <span class="stringliteral">&quot;!&quot;</span>;</div><div class="line">            output(greeting);</div><div class="line">        }</div><div class="line">    );</div><div class="line"></div><div class="line">    mf::chain(sub, flt, pub);</div><div class="line">    ros::spin();</div><div class="line">}</div></div><!-- fragment --><p>The user-defined filter accepts a <code>std_msgs::String</code> message with a name as input and composes a new <code>std_msgs::String</code> message with a personalized greeting as output. Note that each source can have arbitrarily many sinks connected to it, and vice vera, so the simplicity of the three-link chain in this example is by no means a limitation of the library.</p>
<h1><a class="anchor" id="types"></a>
Data Types</h1>
<p>Sources and sinks are strongly typed, i.e., each source will only pass on data of a particular type, and each sink will only accept data of a particular type. The compiler will error out if you try to connect incompatible filters. As the strong typing relies on the C++ template mechanism, the error messages can be quite verbose and difficult to parse (looking at you, GCC). It is very much recommended to use the <code>Input</code> and <code>Output</code> typedefs which are provided by every filter.</p>
<h1><a class="anchor" id="n-ary-filters"></a>
N-ary filters</h1>
<p>All sources and sinks support the grouping of multiple data types, where items of different types are combined and passed on as a unit. This is particularly useful to process messages from distinct topics which belong together conceptually, e.g., the <code>sensor_msgs::Image</code> and <code>sensor_msgs::CameraInfo</code> messages from a calibrated camera.</p>
<p>N-ary filters can be created, rearranged, and broken up using the <a class="el" href="classfkie__message__filters_1_1Combiner.html">Combiner </a>, <a class="el" href="classfkie__message__filters_1_1Divider.html">Divider </a>, and <a class="el" href="classfkie__message__filters_1_1Selector.html">Selector </a> filters.</p>
<h1><a class="anchor" id="implementation"></a>
Implementation Details</h1>
<p>Generally, the pipeline processing is executed by nested calls to receive and send functions. The library is thread-safe and guarantees basic exception safety, but you are expected to handle your own exceptions in your callbacks. Exceptions which propagate through library code will abort processing for the offending message immediately, even if not all downstream sinks have received the message yet. If there is no upstream user-defined filter that catches the exception, the uncaught exception will eventually terminate the program. The library will detect cycles in the pipeline and abort with a <code>std::logic_error</code> exception. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
